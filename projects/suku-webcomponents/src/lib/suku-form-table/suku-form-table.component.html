<div class="col p-0">
  <table>
    <tr *ngIf="enableSelectAll && _items[0]">
      <td *ngFor="let list of _items[0] | keys; let i=index" [ngClass]="{'text-center': typeKey[list]=='Checkbox'}">
        <!-- checkbox -->
        <span [ngClass]="{'align-checkbox': editable[j] }" *ngIf="(typeKey[list]=='Checkbox')">
          <mat-checkbox (change)="sendData();" color="primary" [disabled]="!editable[j] && (list != selectionKey)"
            [(ngModel)]="selectAll" (change)="selectAllAction()"> Select All
          </mat-checkbox>
        </span>
      </td>
    </tr>
  </table>
  <div class="header">
    <div class="col" [ngClass]="{'pt-3 pb-3': (type == 'Processor'), 'pb-4 pt-4': (type != 'Processor') }">
      <div class="row">
        <div class="col mt-auto mb-auto">
          <h1 [style.font-size.px]="titleOneSize" class="title mt-auto mb-0 {{titleOneCustomClass}}"
            [style.font-weight]="titleOneWeight" [style.color]="titleOneColor" id="{{titleOneId}}">
            {{titleContent}}
          </h1>
        </div>
        <div class="col" id="processor">
          <span [ngClass]="{'align-checkbox': editable[j] }" *ngIf="type == 'Processor'">
            <mat-checkbox (change)="sendData();" color="primary" [(ngModel)]="selectAll" (change)="selectAllAction()">
              <span class="checkbox">Select All</span>
            </mat-checkbox>
          </span>
        </div>
      </div>
    </div>
  </div>
  <div class="col p-0">
    <table class="table bg-white table-responsive-sm">
      <thead>
        <tr>
          <th *ngFor="let head of _items[0] | keys" [ngClass]="{'text-center': typeKey[head]=='Checkbox'}">
            <span *ngIf="!(head === 'Sku')">{{head | titlecase }}</span>
            <span *ngIf="head === 'Sku'" class="Sku" >{{head}}</span>
          </th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of _items;let j=index">
          <!-- '#d2d2d2' f8dbb4 -->
          <!-- ((list == highlighterKey) ?
           ((item[selectionKey] && item[highlighterKey] && enableHighlighter) ? '#a3ded8':( !(item[selectionKey] &&
           enableHighlighter) ?
           '#d3d9dc' : '#f8dbb4')) : '')
           ||
           ((list == patchKey) ?
           ((item[patchKey]) ? '#a3ded8' :( !(item[selectionKey]) ? '#f8dbb4' : '#d3d9dc')) : '') -->
          <!-- ((list == patchKey) ?
            ((item[patchKey]) ? '#a3ded8' :( !(item[selectionKey]) ? '#f8dbb4' : '#d3d9dc')) : '') -->
          <td [ngClass]="{'border-enable': checkValid(list), 'text-center': typeKey[list]=='Checkbox' }"
            *ngFor="let list of item | keys; let i=index" [style.background-color]="(checkValid(list) ?
            ((item[selectionKey] && item[highlighterKey] && enableHighlighter) ? '#a3ded8':( !(item[selectionKey] &&
            enableHighlighter) ?
            '#d3d9dc' : '#f8dbb4')) : '')
            ||
            ((item[selectionKey] && (list == patchKey)) ? '#d3d9dc' : 
            ( ((list == patchKey) &&(item[patchKey])) ? '#a3ded8':
             ((list == patchKey) ? '#f8dbb4' :'')))">
            <span
              *ngIf="!editable[j] && (list != 'action') && (typeKey[list]!='Checkbox') && !checkValid(list) && (list != patchKey)">
              {{item[list]}}
            </span>
            <!-- input -->
            <span *ngIf="editable[j] && (list != 'action') && ( typeKey[list]=='String' || typeKey[list]=='Number')">
              <input (keyup)="sendData()" (keypress)="checkSpcialChar($event)" class="form-control"
                [(ngModel)]="item[list]" [maxLength]="25" type="{{(typeKey[list]=='Number')?'number':'text'}}"
                (change)="validate(item[list],j)"
                *ngIf="editable[j] && (list != 'action') && ( typeKey[list]=='String' || typeKey[list]=='Number')" />
              <p id="id{{j}}" class="errorMessage"
                *ngIf="(j == errorvalidationIndex) && (item[list] == errorvalidationKey )">value should be greater then
                0</p>
            </span>

            <input type="date" (keyup)="sendData()" data-date="" data-date-format="mm/dd/yyyy" class="form-control"
              *ngIf="editable[j] && (list != 'action') && typeKey[list]=='Date'" [(ngModel)]="item[list]" />

            <!-- checkbox -->
            <span class="align-checkbox" *ngIf="(typeKey[list]=='Checkbox')">
              <mat-checkbox color="primary"
                (change)="sendData();patchValue(item[selectionKey], item[highlighterKey], j)"
                [disabled]="!editable[j] && (list != selectionKey)" [(ngModel)]="item[list]">
              </mat-checkbox>
            </span>

            <!-- select -->
            <select class="form-control" (change)="sendData()" *ngIf="editable[j] && (list != 'action') 
            && ( typeKey[list]!='String' && typeKey[list]!='Number' && typeKey[list]!='Checkbox' &&
            typeKey[list] !='Date')" [(ngModel)]="item[list]">
              <option *ngFor="let c of typeKey[list];let k=index" id="asset{{k}}" [ngValue]="c"> {{c}} </option>
            </select>

            <!-- input- highlighterKey -->
            <span *ngIf="checkValid(list) && (list != 'action')">
              <span *ngFor="let data of keyData;let dataIndex=index">
                <span *ngIf="(list == data.key)">
                  <input type="{{(typeKey[list]=='Number')?'number':'text'}}" id="asset{{j}}{{dataIndex}}"
                    (keyup)="sendData()" [ngClass]="{'disabled': !item[selectionKey]}" [disabled]="!item[selectionKey]"
                    class="form-control sample" [(ngModel)]="item[data.key]"
                    (change)="validate(item[data.key],dataIndex)"
                    *ngIf="checkValid(list) && (list != 'action') && highlighterKey" />
                </span>
                <p id="{{dataIndex}}" class="errorMessage"
                  *ngIf="(dataIndex == errorvalidationIndex) && (item[data.key] == errorvalidationKey )">value should be
                  greater then 0</p>
              </span>
            </span>

            <!-- input -patchKey -->
            <span *ngIf="(list == patchKey) && (list != 'action')
            && patchKey">
              <input type="{{(typeKey[list]=='Number')?'number':'text'}}" id="asset{{j}}{{selectionKey}}"
                (keyup)="sendData();" [ngClass]="{'disabled':
              item[selectionKey]}" [disabled]="item[selectionKey]" class="form-control sample"
                [(ngModel)]="item[patchKey]" *ngIf="(list == patchKey) && (list != 'action')
              && patchKey" (change)="validate(item[patchKey],selectionKey)" />
              <p id="asset{{j}}{{selectionKey}}" class="errorMessage"
                *ngIf="(selectionKey == errorvalidationIndex) && (item[patchKey] == errorvalidationKey )">value should
                be greater then 0</p>
            </span>

            <span class="col p-0 pl-2" (click)="edit(j, item);sendData()" *ngIf="list == 'action' && !editable[j]">
              <span class="secondary-btn controlCustomClass" id="edit{{j}}" [style.font-size.rem]="controlsSize"
                [ngClass]="{'btn-edit' : editable[j]}">
                edit
              </span>
            </span>
            <span class="col p-0 pl-2" *ngIf="list == 'action' && editable[j]">
              <span class="secondary-btn controlCustomClass" id="edit{{j}}" [style.font-size.rem]="controlsSize"
                (click)="edit(j, item);sendData()" [ngClass]="{'btn-edit' : editable[j]}">
                save
              </span>
            </span>
            <span class="col c-pointer pl-4" *ngIf="list == 'action'">
              <span class="secondary-btn controlCustomClass" id="edit{{j}}" [style.font-size.rem]="controlsSize"
                (click)="removedata(j, item);sendData()" [ngClass]="{'btn-edit' : editable[j]}">
                remove
              </span>
            </span>
          </td>
        </tr>

      </tbody>
    </table>
  </div>
  <div class="col text-right" *ngIf="enableControls">
    <span class="p-2">
      <a class="secondary-btn" id="addOneRow" [style.font-size.rem]="controlsSize" (click)="addTable(1,_items?.length)"
        color="primary">Add 1 row</a>
    </span>
    <span class="p-2">
      <a class="secondary-btn" id="addTenRow" [style.font-size.rem]="controlsSize"
        (click)="addTable(10, _items?.length)" color="primary">Add 10 rows</a>
    </span>
  </div>
</div>